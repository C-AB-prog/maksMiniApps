<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ffffff" />
  <title>Growth Assistant · Ultra‑Minimal Mobile</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* === Ultra‑minimal, neutral light, mobile‑first === */
    :root{
      --accent:#3B82F6;         /* single brand accent */
      --bg:#FAFAFB;             /* app bg */
      --surface:#FFFFFF;        /* card */
      --line:#EDEEF2;           /* hairline */
      --text:#0F172A;           /* primary */
      --muted:#6B7280;          /* secondary */
      --ok:#16A34A; --warn:#EA580C; --err:#DC2626;
      --r-lg:14px; --r-md:12px; --r-sm:10px;
      --sh-xs:0 1px 2px rgba(15,23,42,.04);
      --h1:clamp(18px,4vw,22px); --h2:clamp(15px,3.4vw,17px); --body:15px; --cap:12px;
      --sp-1:6px; --sp-2:10px; --sp-3:12px; --sp-4:16px; --sp-5:20px;
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; font-size:var(--body); color:var(--text); background:var(--bg); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; -webkit-tap-highlight-color:transparent}
    img,svg{max-width:100%; display:block}
    button,input,select,textarea{font:inherit}

    /* Layout */
    .app{min-height:100%; display:flex; flex-direction:column}
    header{position:sticky; top:0; z-index:20; background:#fff; border-bottom:1px solid var(--line)}
    .topbar{display:flex; align-items:center; gap:var(--sp-2); padding:var(--sp-2) var(--sp-3)}
    .brand{display:flex; align-items:center; gap:var(--sp-2)}
    .dot{width:18px;height:18px;border-radius:6px; background:var(--accent)}
    .title{font-weight:700}

    .seg{display:flex; gap:6px; overflow:auto; padding:0 var(--sp-3) var(--sp-2)}
    .seg button{height:34px; padding:0 12px; border-radius:999px; border:1px solid var(--line); background:#fff; color:#111827}
    .seg button.active{border-color:var(--accent); color:#0B4DD9}

    main{flex:1; padding:0 var(--sp-3) calc(96px + env(safe-area-inset-bottom))}

    /* Cards */
    .card{background:var(--surface); border:1px solid var(--line); border-radius:var(--r-lg); padding:var(--sp-3); box-shadow:var(--sh-xs)}
    .card + .card{margin-top:var(--sp-3)}

    h1{font-size:var(--h1); margin:var(--sp-2) 0 var(--sp-2)}
    h2{font-size:var(--h2); margin:0 0 var(--sp-2) 0}
    .sub{color:var(--muted); font-size:var(--cap)}

    /* Inputs & buttons */
    .row{display:flex; gap:var(--sp-2); align-items:center}
    .input{height:44px; padding:0 12px; width:100%; border-radius:12px; border:1px solid var(--line); background:#fff}
    .btn{height:44px; padding:0 14px; border-radius:12px; border:1px solid var(--accent); background:var(--accent); color:#fff; font-weight:600}
    .btn.ghost{background:#fff; color:#111827; border-color:var(--line)}

    /* Quick add (single‑step) */
    .quick{display:flex; gap:8px}
    .chip{height:34px; padding:0 10px; border-radius:999px; border:1px solid var(--line); background:#fff; font-size:12px; color:#111827}
    .chip.active{border-color:var(--accent); color:#0B4DD9}

    /* List */
    .list{display:flex; flex-direction:column; gap:8px}
    .item{display:flex; align-items:center; gap:8px; padding:10px; background:#fff; border:1px solid var(--line); border-radius:12px; min-width:0}
    .check{appearance:none; width:20px; height:20px; border-radius:6px; border:1px solid var(--line); background:#fff}
    .check:checked{background:var(--accent); border-color:var(--accent)}
    .body{flex:1; min-width:0}
    .title{font-weight:600; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}
    .hint{color:var(--muted); font-size:12px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}
    .tag{font-size:11px; color:#0F766E; background:#ECFDF5; border:1px solid #A7F3D0; padding:4px 6px; border-radius:999px; white-space:nowrap}
    .more{border:none; background:transparent; font-size:18px; color:#9CA3AF}

    /* Context menu */
    .ctx{position:fixed; z-index:40; background:#fff; border:1px solid var(--line); border-radius:12px; box-shadow:var(--sh-xs); padding:6px; min-width:160px}
    .act{display:block; width:100%; text-align:left; border:none; background:#fff; padding:8px 10px; border-radius:8px; font-size:14px}
    .act:hover{background:#F8FAFC}

    /* Secondary screens */
    .kpi-grid{display:grid; grid-template-columns:repeat(2, minmax(140px,1fr)); gap:10px}
    .kpi{background:#fff; border:1px solid var(--line); border-radius:12px; padding:10px}
    .kpi .value{font-weight:700}

    .board{display:grid; grid-template-columns:repeat(2, minmax(160px,1fr)); gap:10px}
    .column{background:#fff; border:1px solid var(--line); border-radius:12px; padding:10px; min-height:180px}
    .hcard{background:#fff; border:1px solid var(--line); border-radius:10px; padding:10px; margin:6px 2px}

    .agenda{display:grid; grid-template-columns:60px 1fr; border:1px solid var(--line); border-radius:12px; overflow:hidden; background:#fff}
    .hour{height:40px; padding:6px 6px; font-size:12px; color:#6B7280; border-bottom:1px dashed #E5E7EB}
    .slot{height:40px; border-bottom:1px dashed #E5E7EB; position:relative}
    .event{position:absolute; left:6px; right:6px; background:#E3F2FD; color:#0B4DD9; border:1px solid #BFDBFE; border-radius:10px; padding:6px; font-size:12px}

    /* Bottom nav (super light) */
    nav{position:fixed; bottom:0; left:0; right:0; z-index:10; background:#fff; border-top:1px solid var(--line); padding:6px env(safe-area-inset-left) calc(6px + env(safe-area-inset-bottom)) env(safe-area-inset-right)}
    .tabs{display:grid; grid-template-columns:repeat(5,1fr); max-width:960px; margin:0 auto; gap:4px}
    .tab{display:flex; flex-direction:column; align-items:center; justify-content:center; height:52px; gap:2px; border-radius:10px; color:#6B7280; font-size:12px}
    .tab.active{color:#111827; background:#F3F4F6}

    @media (min-width:720px){ .kpi-grid{grid-template-columns:repeat(3, minmax(220px,1fr))} .board{grid-template-columns:repeat(4, minmax(220px,1fr))} .agenda{grid-template-columns:80px 1fr} .hour,.slot{height:48px} }
  </style>
</head>
<body>
<div class="app">
  <header>
    <div class="topbar">
      <div class="brand"><div class="dot" aria-hidden="true"></div><div class="title">Growth Assistant</div></div>
    </div>
    <div class="seg" role="tablist" aria-label="Навигация">
      <button class="active" data-target="today" role="tab" aria-selected="true">Сегодня</button>
      <button data-target="plan" role="tab">План</button>
      <button data-target="hadi" role="tab">HADI</button>
      <button data-target="calendar" role="tab">Календарь</button>
      <button data-target="metrics" role="tab">Метрики</button>
      <button data-target="settings" role="tab">Настройки</button>
    </div>
  </header>

  <main>
    <!-- TODAY -->
    <section id="screen-today" class="screen" aria-labelledby="todayTitle">
      <h1 id="todayTitle">Сегодня</h1>

      <div class="card">
        <h2>Фокус дня</h2>
        <div class="row"><input id="focus" class="input" placeholder="Самое главное сегодня…"><button class="btn" onclick="saveFocus()">Сохранить</button></div>
        <div class="sub" style="margin-top:6px">Пример: «5 интервью + черновик лендинга»</div>
      </div>

      <div class="card" aria-label="Быстрое добавление задачи">
        <h2>Быстрое добавление</h2>
        <div class="row">
          <input id="add" class="input" placeholder="Добавить задачу…  (@26.10, /неделя)" onkeydown="if(event.key==='Enter'){quickAdd()}" aria-label="Название задачи">
          <button class="btn" onclick="quickAdd()">Добавить</button>
        </div>
        <div class="quick" style="margin-top:8px">
          <button class="chip active" data-list="today" onclick="pickList(this)">Сегодня</button>
          <button class="chip" data-list="week" onclick="pickList(this)">Неделя</button>
          <button class="chip" data-list="backlog" onclick="pickList(this)">Бэклог</button>
        </div>
        <div class="sub" style="margin-top:6px">Подсказки: @26.10 — дедлайн · /неделя — список</div>
      </div>

      <div class="card" role="region" aria-labelledby="tTitle">
        <div class="row" style="justify-content:space-between; align-items:center"><h2 id="tTitle">Задачи на сегодня</h2><button class="btn ghost" onclick="toggleAll()" id="toggleBtn">Показать всё</button></div>
        <div id="todayList" class="list"></div>
      </div>

      <div class="card" role="region" aria-labelledby="wTitle">
        <h2 id="wTitle">Прогресс недели</h2>
        <svg viewBox="0 0 200 40" id="spark"></svg>
      </div>
    </section>

    <!-- PLAN (все списки) -->
    <section id="screen-plan" class="screen" hidden>
      <h1>План</h1>
      <div class="card"><h2>Сегодня</h2><div id="list-today" class="list"></div></div>
      <div class="card"><h2>На неделе</h2><div id="list-week" class="list"></div></div>
      <div class="card"><h2>Бэклог</h2><div id="list-backlog" class="list"></div></div>
    </section>

    <!-- HADI -->
    <section id="screen-hadi" class="screen" hidden>
      <h1>HADI</h1>
      <div class="board">
        <div class="column" data-col="Planned"><strong>Planned</strong></div>
        <div class="column" data-col="Running"><strong>Running</strong></div>
        <div class="column" data-col="Review"><strong>Review</strong></div>
        <div class="column" data-col="Done"><strong>Done</strong></div>
      </div>
    </section>

    <!-- CALENDAR -->
    <section id="screen-calendar" class="screen" hidden>
      <h1>Календарь</h1>
      <div class="agenda"><div class="hour">09:00</div><div class="slot"></div><div class="hour">10:00</div><div class="slot"></div><div class="hour">11:00</div><div class="slot"></div><div class="hour">12:00</div><div class="slot"></div><div class="hour">13:00</div><div class="slot"></div><div class="hour">14:00</div><div class="slot"></div><div class="hour">15:00</div><div class="slot"></div><div class="hour">16:00</div><div class="slot"></div><div class="hour">17:00</div><div class="slot"></div></div>
    </section>

    <!-- METRICS -->
    <section id="screen-metrics" class="screen" hidden>
      <h1>Метрики</h1>
      <div class="kpi-grid">
        <div class="kpi"><div class="sub">Лиды / неделя</div><div class="value">32</div></div>
        <div class="kpi"><div class="sub">Конверсия</div><div class="value">1.6%</div></div>
        <div class="kpi"><div class="sub">Выручка / нед.</div><div class="value">₽ 128 000</div></div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="screen-settings" class="screen" hidden>
      <h1>Настройки</h1>
      <div class="card"><div class="sub">Таймзона: Europe/Helsinki · Уведомления: вкл</div></div>
    </section>
  </main>

  <nav>
    <div class="tabs">
      <button class="tab active" data-target="today">🏠<span class="micro">Сегодня</span></button>
      <button class="tab" data-target="plan">🧭<span class="micro">План</span></button>
      <button class="tab" data-target="hadi">🧪<span class="micro">HADI</span></button>
      <button class="tab" data-target="calendar">🗓️<span class="micro">Календарь</span></button>
      <button class="tab" data-target="metrics">📊<span class="micro">Метрики</span></button>
      <button class="tab" data-target="settings">⚙️<span class="micro">Настройки</span></button>
    </div>
  </nav>
</div>

<script>
  /* === State === */
  const lists = { today:[], week:[], backlog:[] }
  let showAll=false
  let picked='today'

  // seed
  lists.today = [
    {id:1,title:'Провести 5 интервью по JTBD',hint:'готово, когда есть записи/инсайты',due:'26.10',done:false},
    {id:2,title:'Лендинг оффера v1',hint:'опубликован URL',due:'23.10',done:false},
    {id:3,title:'Запуск канала трафика №1',hint:'вкл. реклама ≥3 000 ₽',due:'24.10',done:false},
    {id:4,title:'Подготовить питч‑дек',hint:'3–5 слайдов',due:'—',done:false},
  ]

  /* === Nav === */
  document.querySelectorAll('.seg button').forEach(b=> b.addEventListener('click',()=> switchScreen(b.dataset.target, '.seg button')))
  document.querySelectorAll('.tab').forEach(b=> b.addEventListener('click',()=> switchScreen(b.dataset.target, '.tab')))
  function switchScreen(target, selector){ document.querySelectorAll(selector).forEach(x=>x.classList.remove('active')); document.querySelector(`${selector}[data-target="${target}"]`).classList.add('active'); document.querySelectorAll('.screen').forEach(s=> s.hidden=true); document.getElementById('screen-'+target).hidden=false; window.scrollTo({top:0,behavior:'smooth'}) }

  /* === Focus === */
  function saveFocus(){ toast('Фокус сохранён') }

  /* === Quick add (tokens: @dd.mm, /list) === */
  function pickList(btn){ document.querySelectorAll('.quick .chip').forEach(x=>x.classList.remove('active')); btn.classList.add('active'); picked=btn.dataset.list }
  function parseTokens(text){ let due='—', list=picked; const t=text.split(/\s+/); const clean=[]; t.forEach(w=>{ if(/^@\d{1,2}\.\d{1,2}$/.test(w)) due=w.slice(1); else if(/^\/(сегодня|неделя|бэклог)$/i.test(w)){ const m=w.toLowerCase(); list= m.includes('недел')?'week': m.includes('бэк')?'backlog':'today'; } else clean.push(w) }); return {title:clean.join(' '), due, list} }
  function quickAdd(){ const input=document.getElementById('add'); const {title,due,list}=parseTokens(input.value.trim()); if(!title) return; lists[list].unshift({id:Date.now(), title, hint:'критерий готовности', due, done:false}); input.value=''; renderToday(); renderPlan(); toast('Добавлено') }

  /* === Renderers === */
  function renderToday(){ const box=document.getElementById('todayList'); box.innerHTML=''; const merged=[...lists.today]; const items= showAll? merged: merged.slice(0,3); items.forEach(t=> box.appendChild(taskRow(t))); if(!items.length) box.innerHTML='<div class="sub">Добавьте первую задачу выше</div>' }
  function renderPlan(){ ['today','week','backlog'].forEach(k=>{ const box=document.getElementById('list-'+k); if(!box) return; box.innerHTML=''; lists[k].forEach(t=> box.appendChild(taskRow(t))) }) }
  function taskRow(t){ const el=document.createElement('div'); el.className='item'; el.innerHTML=`<input type="checkbox" class="check" ${t.done?'checked':''} onchange="toggleDone(${t.id})"><div class="body"><div class="title">${esc(t.title)}</div><div class="hint">${esc(t.hint||'')}</div></div><span class="tag">${esc(t.due)}</span><button class="more" onclick="menu(${t.id}, this)">⋯</button>`; return el }

  /* === Actions === */
  function toggleDone(id){ ['today','week','backlog'].forEach(k=>{ const t=lists[k].find(x=>x.id===id); if(t) t.done=!t.done }); toast('Обновлено') }
  function removeTask(id){ for(const k of ['today','week','backlog']){ const i=lists[k].findIndex(x=>x.id===id); if(i>-1){ lists[k].splice(i,1); break } } renderToday(); renderPlan(); toast('Удалено') }
  function shiftTomorrow(id){ toast('На завтра (демо)') }
  function toggleAll(){ showAll=!showAll; document.getElementById('toggleBtn').textContent = showAll? 'Скрыть лишнее':'Показать всё'; renderToday() }

  /* === Menu === */
  let ctx=null
  function menu(id, btn){ closeMenu(); const m=document.createElement('div'); m.className='ctx'; m.innerHTML=`<button class="act" onclick="shiftTomorrow(${id}); closeMenu()">⏭ На завтра</button><button class="act" onclick="removeTask(${id}); closeMenu()" style="color:#DC2626">🗑️ Удалить</button>`; document.body.appendChild(m); const r=btn.getBoundingClientRect(); const mw=180; m.style.left=Math.min(window.innerWidth-mw-10, Math.max(10, r.right-mw))+'px'; m.style.top=(r.bottom + window.scrollY + 8)+'px'; ctx=m; setTimeout(()=>document.addEventListener('click',docClose),0) }
  function closeMenu(){ if(ctx){ ctx.remove(); ctx=null; document.removeEventListener('click',docClose) } }
  function docClose(e){ if(ctx && !ctx.contains(e.target)) closeMenu() }

  /* === Sparkline === */
  function renderSpark(){ const svg=document.getElementById('spark'); const w=200,h=40; const v=[2,3,4,2,5,3,4]; const max=Math.max(...v); const pts=v.map((val,i)=>[i*(w/(v.length-1)), h - (val/max)*(h-6)-3]); const d=pts.map((p,i)=>(i?'L':'M')+p[0]+','+p[1]).join(' '); svg.innerHTML=`<path d="${d}" fill="none" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--accent').trim()}" stroke-width="2"/><circle cx="${pts.at(-1)[0]}" cy="${pts.at(-1)[1]}" r="3" fill="${getComputedStyle(document.documentElement).getPropertyValue('--accent').trim()}"/>` }

  /* === Utils === */
  function esc(s){ return String(s).replace(/[&<>"']/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m])) }
  function toast(msg){ const t=document.createElement('div'); t.textContent=msg; t.style.cssText='position:fixed;bottom:84px;left:50%;transform:translateX(-50%);background:#111827;color:#fff;padding:10px 12px;border-radius:10px;box-shadow:var(--sh-xs);opacity:.98;z-index:99'; document.body.appendChild(t); setTimeout(()=>{t.style.transition='opacity .4s'; t.style.opacity='0'; setTimeout(()=>t.remove(),400)}, 900) }

  /* === Init === */
  function init(){ renderToday(); renderPlan(); renderSpark() }
  init()
</script>
</body>
</html>
